<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BAHR LAB - Infinite AI Book</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="book-styles.css">
</head>
<body>
    <div class="header">
        <img src="https://raw.githubusercontent.com/bahrlab/bahrlab.github.io/refs/heads/main/files/images/BAHRLABLOGO.png" alt="BAHR LAB" class="logo" onclick="goHome()">
        <div class="header-controls">
            <button class="header-btn" id="editModeBtn" onclick="toggleEditMode()" title="Edit Mode">
                <span>‚úèÔ∏è</span>
            </button>
            <button class="header-btn" id="settingsBtn" onclick="openSettingsModal()" title="Book Settings">
                <span>‚öôÔ∏è</span>
            </button>
            <button class="header-btn" onclick="exportBook()" title="Export Book">
                <span>üì§</span>
            </button>
        </div>
    </div>
    
    <!-- –°–æ–∑–¥–∞–Ω–∏–µ –∫–Ω–∏–≥–∏ -->
    <div id="creationPage" class="main-content">
        <h1 class="main-title">Infinite AI Book</h1>
        <p class="subtitle">Create an endless story generated by artificial intelligence</p>
        
        <div class="book-creation-container">
            <h2 class="section-title">Create Your Book</h2>
            
            <div class="book-settings">
                <div class="setting-group">
                    <label class="setting-label">üìñ Book Title</label>
                    <input type="text" class="setting-input" id="bookTitle" placeholder="Enter book title..." value="The Eternal Chronicles">
                </div>
                
                <div class="setting-group">
                    <label class="setting-label">‚úçÔ∏è Author Name</label>
                    <input type="text" class="setting-input" id="bookAuthor" placeholder="Enter author name..." value="AI Storyteller">
                </div>
                
                <div class="setting-group">
                    <label class="setting-label">üé≠ Genre</label>
                    <select class="setting-select" id="bookGenre">
                        <option value="fantasy">Fantasy</option>
                        <option value="scifi">Science Fiction</option>
                        <option value="mystery">Mystery</option>
                        <option value="romance">Romance</option>
                        <option value="adventure">Adventure</option>
                        <option value="horror">Horror</option>
                        <option value="historical">Historical</option>
                        <option value="drama">Drama</option>
                    </select>
                </div>
                
                <div class="setting-group">
                    <label class="setting-label">üé® Writing Style</label>
                    <select class="setting-select" id="writingStyle">
                        <option value="descriptive">Descriptive and Detailed</option>
                        <option value="concise">Concise and Direct</option>
                        <option value="poetic">Poetic and Lyrical</option>
                        <option value="humorous">Humorous and Witty</option>
                        <option value="dramatic">Dramatic and Intense</option>
                        <option value="simple">Simple and Clear</option>
                    </select>
                </div>
                
                <div class="setting-group full-width">
                    <label class="setting-label">üìù Story Premise</label>
                    <textarea class="setting-textarea" id="storyPremise" placeholder="Describe what your story is about...">In a world where memories can be traded like currency, a young apprentice discovers she has the rare ability to see forgotten memories. As she uncovers a conspiracy that threatens to erase history itself, she must navigate through layers of deception while trying to preserve the truth.</textarea>
                </div>
                
                <div class="setting-group full-width">
                    <label class="setting-label">üë• Main Characters</label>
                    <textarea class="setting-textarea" id="mainCharacters" placeholder="Describe the main characters...">Elara: A 17-year-old memory apprentice with silver eyes that can see forgotten memories. She's curious, brave, but haunted by gaps in her own past.

Kaelen: A mysterious archivist who guards forbidden memories. He's knowledgeable but secretive, with motives that remain unclear.

Professor Alistair: Elara's mentor, a stern but caring memory historian who may know more than he reveals.

The Memory Council: The governing body that controls all memory trade, led by the enigmatic Chancellor Veridia.</textarea>
                </div>
                
                <div class="setting-group full-width">
                    <label class="setting-label">üåç World Setting</label>
                    <textarea class="setting-textarea" id="worldSetting" placeholder="Describe the world...">The city of Mnemosyne floats above the clouds, built around the Great Memory Vault. Citizens trade memories in crystal vials at bustling memory markets. Those who lose too many memories become 'Echoes' - empty shells wandering the lower city. The technology is steam-punk meets magical realism, with memory-powered machines and glass-domed observatories.</textarea>
                </div>
                
                <div class="setting-group">
                    <label class="setting-label">üìñ Chapters Length</label>
                    <div class="range-container">
                        <input type="range" min="1" max="10" value="5" class="range-input" id="chapterLength">
                        <div class="range-labels">
                            <span>Short</span>
                            <span>Medium</span>
                            <span>Long</span>
                        </div>
                    </div>
                </div>
                
                <div class="setting-group">
                    <label class="setting-label">‚ö° Plot Complexity</label>
                    <div class="range-container">
                        <input type="range" min="1" max="10" value="6" class="range-input" id="plotComplexity">
                        <div class="range-labels">
                            <span>Simple</span>
                            <span>Moderate</span>
                            <span>Complex</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="action-buttons">
                <button class="action-button primary" onclick="createBook()">
                    <span>üìñ</span> Create Book
                </button>
                <button class="action-button secondary" onclick="loadExample()">
                    <span>‚ú®</span> Load Example
                </button>
            </div>
        </div>
    </div>
    
    <!-- –ß—Ç–µ–Ω–∏–µ –∫–Ω–∏–≥–∏ -->
    <div id="readingPage" style="display: none;">
        <div class="book-container" id="bookContainer">
            <div class="book-controls">
                <button class="book-nav-btn" onclick="previousPage()" id="prevBtn">
                    <span>‚Üê</span> Previous
                </button>
                
                <div class="book-info">
                    <h2 id="currentBookTitle" class="book-title-display"></h2>
                    <div class="chapter-info">
                        <span id="currentChapter">Chapter 1</span>
                        <span class="page-counter">Page <span id="currentPage">1</span></span>
                    </div>
                </div>
                
                <button class="book-nav-btn" onclick="nextPage()" id="nextBtn">
                    Next <span>‚Üí</span>
                </button>
            </div>
            
            <div class="book-content-container">
                <div class="book-page" id="bookPage">
                    <div class="page-content" id="pageContent">
                        <!-- –ö–æ–Ω—Ç–µ–Ω—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã –±—É–¥–µ—Ç –∑–¥–µ—Å—å -->
                    </div>
                </div>
            </div>
            
            <div class="page-generation">
                <button class="generate-btn" onclick="generateNextPage()" id="generateBtn">
                    <span>‚ú®</span> Generate Next Page
                </button>
                <button class="generate-btn secondary" onclick="generateNextChapter()">
                    <span>üìò</span> Next Chapter
                </button>
                <div class="generation-progress" id="generationProgress" style="display: none;">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <div class="progress-text" id="progressText">Generating...</div>
                </div>
            </div>
        </div>
        
        <!-- –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è -->
        <div class="edit-sidebar" id="editSidebar">
            <div class="sidebar-header">
                <h3>‚úèÔ∏è Edit Page</h3>
                <button class="close-sidebar" onclick="closeEditSidebar()">√ó</button>
            </div>
            
            <div class="edit-controls">
                <div class="edit-section">
                    <label>Edit Current Text:</label>
                    <textarea class="edit-textarea" id="editPageText"></textarea>
                </div>
                
                <div class="edit-section">
                    <label>Instruction for AI:</label>
                    <textarea class="edit-textarea" id="editInstruction" placeholder="What should happen next? Change something? Add an event?"></textarea>
                </div>
                
                <div class="edit-actions">
                    <button class="edit-action-btn" onclick="regeneratePage()">
                        <span>üîÑ</span> Regenerate This Page
                    </button>
                    <button class="edit-action-btn" onclick="editAndContinue()">
                        <span>‚úèÔ∏è</span> Edit & Continue
                    </button>
                    <button class="edit-action-btn warning" onclick="rewriteFromHere()">
                        <span>üìù</span> Rewrite From Here
                    </button>
                </div>
                
                <div class="edit-section">
                    <label>Plot Changes:</label>
                    <div class="plot-options">
                        <button class="plot-option" onclick="addPlotTwist()">
                            <span>üé≠</span> Add Plot Twist
                        </button>
                        <button class="plot-option" onclick="introduceCharacter()">
                            <span>üë§</span> New Character
                        </button>
                        <button class="plot-option" onclick="changeSetting()">
                            <span>üåç</span> Change Setting
                        </button>
                        <button class="plot-option" onclick="resolveConflict()">
                            <span>‚öîÔ∏è</span> Resolve Conflict
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è -->
        <div class="edit-indicator" id="editIndicator">
            <div class="indicator-content">
                <div class="loading-spinner small"></div>
                <span>Applying changes...</span>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫ -->
    <div class="modal-overlay" id="settingsModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">Book Settings</h3>
                <button class="close-modal" onclick="closeSettingsModal()">√ó</button>
            </div>
            
            <div class="modal-content">
                <div class="setting-group">
                    <label class="setting-label">Change Genre:</label>
                    <select class="setting-select" id="settingsGenre">
                        <option value="fantasy">Fantasy</option>
                        <option value="scifi">Science Fiction</option>
                        <option value="mystery">Mystery</option>
                        <option value="romance">Romance</option>
                        <option value="adventure">Adventure</option>
                        <option value="horror">Horror</option>
                        <option value="historical">Historical</option>
                        <option value="drama">Drama</option>
                    </select>
                </div>
                
                <div class="setting-group">
                    <label class="setting-label">Change Writing Style:</label>
                    <select class="setting-select" id="settingsStyle">
                        <option value="descriptive">Descriptive and Detailed</option>
                        <option value="concise">Concise and Direct</option>
                        <option value="poetic">Poetic and Lyrical</option>
                        <option value="humorous">Humorous and Witty</option>
                        <option value="dramatic">Dramatic and Intense</option>
                        <option value="simple">Simple and Clear</option>
                    </select>
                </div>
                
                <div class="setting-group">
                    <label class="setting-label">Font Size:</label>
                    <div class="font-size-controls">
                        <button class="font-size-btn" onclick="changeFontSize(-1)">A-</button>
                        <span class="font-size-display" id="fontSizeDisplay">Medium</span>
                        <button class="font-size-btn" onclick="changeFontSize(1)">A+</button>
                    </div>
                </div>
                
                <div class="setting-group">
                    <label class="setting-label">Theme:</label>
                    <div class="theme-options">
                        <button class="theme-option active" data-theme="light" onclick="changeTheme('light')">
                            <span>‚òÄÔ∏è</span> Light
                        </button>
                        <button class="theme-option" data-theme="dark" onclick="changeTheme('dark')">
                            <span>üåô</span> Dark
                        </button>
                        <button class="theme-option" data-theme="sepia" onclick="changeTheme('sepia')">
                            <span>üìú</span> Sepia
                        </button>
                    </div>
                </div>
                
                <div class="setting-group">
                    <label class="setting-label">Auto-generate:</label>
                    <div class="toggle-switch">
                        <input type="checkbox" id="autoGenerate" checked>
                        <label for="autoGenerate" class="toggle-label"></label>
                        <span>Generate pages automatically</span>
                    </div>
                </div>
            </div>
            
            <div class="modal-actions">
                <button class="modal-btn primary" onclick="applySettings()">
                    Apply Settings
                </button>
                <button class="modal-btn" onclick="closeSettingsModal()">
                    Cancel
                </button>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —ç–∫—Å–ø–æ—Ä—Ç–∞ -->
    <div class="modal-overlay" id="exportModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">Export Book</h3>
                <button class="close-modal" onclick="closeExportModal()">√ó</button>
            </div>
            
            <div class="modal-content">
                <p>Export your book in different formats:</p>
                
                <div class="export-options">
                    <button class="export-option" onclick="exportAsTXT()">
                        <span class="export-icon">üìÑ</span>
                        <div class="export-info">
                            <div class="export-title">Text File (.txt)</div>
                            <div class="export-desc">Plain text format</div>
                        </div>
                    </button>
                    
                    <button class="export-option" onclick="exportAsPDF()">
                        <span class="export-icon">üìò</span>
                        <div class="export-info">
                            <div class="export-title">PDF Document</div>
                            <div class="export-desc">Formatted for reading</div>
                        </div>
                    </button>
                    
                    <button class="export-option" onclick="exportAsEPUB()">
                        <span class="export-icon">üì±</span>
                        <div class="export-info">
                            <div class="export-title">EPUB Format</div>
                            <div class="export-desc">For e-readers</div>
                        </div>
                    </button>
                    
                    <button class="export-option" onclick="exportAsHTML()">
                        <span class="export-icon">üåê</span>
                        <div class="export-info">
                            <div class="export-title">Web Page</div>
                            <div class="export-desc">Interactive HTML</div>
                        </div>
                    </button>
                </div>
                
                <div class="export-stats">
                    <div class="stat-item">
                        <span class="stat-label">Chapters:</span>
                        <span class="stat-value" id="exportChapters">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Pages:</span>
                        <span class="stat-value" id="exportPages">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Words:</span>
                        <span class="stat-value" id="exportWords">0</span>
                    </div>
                </div>
            </div>
            
            <div class="modal-actions">
                <button class="modal-btn" onclick="closeExportModal()">
                    Close
                </button>
            </div>
        </div>
    </div>

    <script src="book-script.js"></script>
</body>
</html>
